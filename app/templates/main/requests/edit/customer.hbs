{{ui-hooks didInsertHook=(action "resetFilters")}}

<h2>Koppel klant aan aanvraag</h2>

{{#if linkCustomerToRequest.isRunning}}
  <div>
    {{paper-progress-linear}}
    <p>Klant koppelen aan aanvraag...</p>
  </div>
{{else}}
  <div class="data-table-filters">
    <div class="data-table-filters--title">{{paper-icon "search"}} Zoeken</div>
    <div class="layout-row flex layout-align-space-between-center">
      {{paper-input label="Nummer" value=numberFilter onChange=(action "setFilter" "number") class="small"}}
      {{paper-input label="Naam" value=nameFilter onChange=(action "setFilter" "name")}}
      {{paper-input label="Straat" value=streetFilter onChange=(action "setFilter" "street") class="large"}}
      {{paper-input label="Postcode" value=postalCodeFilter onChange=(action "setFilter" "postalCode") class="small"}}
      {{paper-input label="Gemeente" value=cityFilter onChange=(action "setFilter" "city")}}
      {{paper-input label="Telefoon" value=telephoneFilter onChange=(action "setFilter" "telephone")}}
      {{#paper-button iconButton=true onClick=(action "resetFilters")}}
        {{paper-icon "close"}}
        {{#paper-tooltip}}Verwijder filters{{/paper-tooltip}}
      {{/paper-button}}
    </div>
  </div>

  {{#data-table content=model isLoading=isLoadingModel noDataMessage="Geen resultaten"
       sort=sort page=page size=size onClickRow=(perform linkCustomerToRequest) as |t|}}
    {{#t.content as |c|}}
      {{#c.header}}
        {{th-sortable field='number' currentSorting=sort label='Nr'}}
        {{th-sortable field='name' currentSorting=sort label='Naam'}}
        {{th-sortable field='address' currentSorting=sort label='Straat'}}
        {{th-sortable field='postal-code' currentSorting=sort label='Postcode'}}
        {{th-sortable field='city' currentSorting=sort label='Gemeente'}}
      {{/c.header}}
      {{#c.body as |row|}}
        <td>{{row.number}}</td>
        <td>{{print-name model=row}}</td>
        <td>{{row.address1}}</td>
        <td>{{row.postalCode}}</td>
        <td>{{row.city}}</td>
      {{/c.body}}
    {{/t.content}}
  {{/data-table}}
{{/if}}

{{liquid-outlet}}