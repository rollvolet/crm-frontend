{{#if isEdit}}
  <div class="layout-row layout-align-space-between-center">
    <h1>Bewerk klant</h1>
    <div><!-- Buttons --></div>
  </div>

  {{customer-entity-edit-form scope='customer' model=model onRollback=(action "onRollback") onSave=(action "onSave")}}
{{else}}
  <div class="layout-row layout-align-space-between-center">
    <h1>{{print-name model=model}} <span class="small-text-fade">[{{model.number}}]</span></h1>
    <div>{{#paper-button onClick=(action "openEdit") iconButton=true}}{{paper-icon "edit mode"}}{{/paper-button}}</div>
  </div>

  <div class="resource-details">
    <div class="layout-row layout-xs-column">
      <div class="left-column">
        {{#detail-icon-list-item icon=(if model.isCompany "business" "home")
             label=(if model.isCompany "Bedrijf" "Naam")
             class="resource-details--section-name"}}
          <div>
            {{#if model.printInFront}}{{model.honorificPrefix.name}}{{/if}}
            {{model.prefix}} {{model.name}} {{model.suffix}}
            {{#if (not model.printInFront)}}{{model.honorificPrefix.name}}{{/if}}
          </div>
          <div>{{model.vatNumber}}</div>
        {{/detail-icon-list-item}}

        {{#detail-icon-list-item icon="location on" label="Adres" class="resource-details--section-address"}}
          <div>{{model.address1}}</div>
          <div>{{model.address2}}</div>
          <div>{{model.address3}}</div>
          <div>{{model.postalCode}} {{model.city}}</div>
          <div>{{model.country.name}}</div>
        {{/detail-icon-list-item}}

        {{#detail-icon-list-item icon="language" label="Taal" class="resource-details--section-language"}}
          {{model.language.name}}
        {{/detail-icon-list-item}}
      </div>

      <div class="right-column">
        {{#detail-icon-list-item icon="phone" label="Telefoon" class="resource-details--section-telephone"}}
          {{#each model.telephones as |tel|}}
            <div>
              {{tel.telephoneType.name}}:
              {{format-phone tel.country.telephonePrefix tel.area tel.number}}
              {{#if tel.memo}}({{tel.memo}}){{/if}}
            </div>
          {{/each}}
        {{/detail-icon-list-item}}

        {{#detail-icon-list-item icon="mail outline" label="E-mail" class="resource-details--section-contact"}}
          <div>{{model.email}}</div>
          <div>{{model.email2}}</div>
          <div>{{model.url}}</div>
        {{/detail-icon-list-item}}
      </div>
    </div>

    {{#detail-icon-list-item icon="label" label="Tags" class="resource-details--section-tags"}}
      {{join ", " (map-by "name" model.tags)}}
    {{/detail-icon-list-item}}

    {{#detail-icon-list-item icon="comment" label="Opmerking" class="resource-details--section-comment"}}
      {{#if model.comment}}<span class="html-body">{{model.comment}}</span>{{else}}Geen opmerkingen{{/if}}
    {{/detail-icon-list-item}}

    {{#detail-icon-list-item icon="assignment" label="Memo" class="resource-details--section-memo"}}
      <div {{action (toggle "memoExpanded" this)}}>
        {{#if model.memo}}
          {{#if memoExpanded}}
            Memo {{paper-icon "expand less"}}
          {{else}}
            Memo {{paper-icon "expand more"}}
          {{/if}}
          {{#liquid-if memoExpanded class="expand-more"}}
            <span class="html-body">{{model.memo}}</span>
          {{/liquid-if}}
        {{else}}
          Geen memo
        {{/if}}
      </div>
    {{/detail-icon-list-item}}

    <div class="resource-details--section resource-details--section-audit layout-row">
      Aangemaakt: {{moment-format model.created}}
    </div>
  </div>

  <div class="related-resources">
    {{#paper-tabs selected=selectedTab onChange=(action (mut selectedTab)) borderBottom=true as |tabs|}}
      {{#tabs.tab}}Contacten{{/tabs.tab}}
      {{#tabs.tab}}Gebouwen{{/tabs.tab}}
      {{#tabs.tab}}Aanvragen{{/tabs.tab}}
      {{#tabs.tab}}Offertes{{/tabs.tab}}
      {{#tabs.tab}}Bestellingen{{/tabs.tab}}
      {{#tabs.tab}}Voorschotfact.{{/tabs.tab}}
      {{#tabs.tab}}Facturen{{/tabs.tab}}
    {{/paper-tabs}}

    {{#liquid-bind (hash tab=selectedTab) use="toRight" as |current|}}
      {{#if (eq current.tab 0)}}
        {{contacts-panel customer=model}}
      {{else if (eq current.tab 1)}}
        {{buildings-panel customer=model}}
      {{else if (eq current.tab 2)}}
        {{requests-table customer=model onClickRow=(action "goToRequestDetail")}}
      {{else if (eq current.tab 3)}}
        {{offers-table customer=model onClickRow=(action "goToOfferDetail")}}
      {{else if (eq current.tab 4)}}
        {{orders-table customer=model onClickRow=(action "goToOrderDetail")}}
      {{else if (eq current.tab 5)}}
        {{deposit-invoices-table customer=model onClickRow=(action "goToDepositInvoiceDetail")}}
      {{else if (eq current.tab 6)}}
        {{invoices-table customer=model onClickRow=(action "goToInvoiceDetail")}}
      {{/if}}
    {{/liquid-bind}}
  </div>
{{/if}}

{{liquid-outlet}}