<div class="layout-row layout-align-start-start">
  <section class="layout-column">
    <div class="layout-row">
      {{paper-input label="Datum" value=model.invoiceDateStr type="date"
          required="style" errors=(v-get model 'invoiceDate' 'messages')
          onChange=(queue (action (mut model.invoiceDateStr)) (perform save))
          class="default"}}
    </div>
    <div class="layout-row">
      {{paper-input label="Vervaldag" value=model.dueDateStr type="date"
          onChange=(queue (action (mut model.dueDateStr)) (perform save))
          class="default"}}
      {{paper-input label="Betaald" value=model.paymentDateStr type="date"
          onChange=(queue (action (mut model.paymentDateStr)) (perform save))
          class="default"}}
    </div>
    <div class="layout-row">
      {{paper-input label="Referentie klant" value=model.reference
          onChange=(action (mut model.reference)) onBlur=(perform save)
          class="xlarge"}}
    </div>
    <div class="layout-row">
      {{paper-input label="Opmerking" value=model.comment
          onChange=(action (mut model.comment)) onBlur=(perform save)
          textarea=true passThru=(hash rows=3) class="xxlarge"}}
    </div>
  </section>
  <section class="case--right-panel flex-noshrink layout-column">
    <div class="layout-row layout-align-start-center">
      {{paper-checkbox label="Creditnota" value=model.isCreditNote
          onChange=(queue (action (mut model.isCreditNote)) (perform save))}}
    </div>
    <div class="layout-row">
      {{vat-rate-select value=model.vatRate
          required="style" errors=(v-get model 'vatRate' 'messages')
          onSelectionChange=(queue (action (mut model.vatRate)) (perform save))
          class="md-input-wrapper"}}
    </div>
    <div class="u-bold">BTW-attest</div>
    <div class="layout-row layout-align-start-center input--certificate">
      {{paper-checkbox label="Nodig" value=model.certificateRequired
          onChange=(queue (action (mut model.certificateRequired)) (perform save))}}
      {{#if model.certificateRequired}}
        {{#file-upload name="certificates" accept="application/pdf" class="certificate-upload"
             onfileadd=(perform uploadCertificate) as |queue|}}
          {{#if hasCertificateUploadError}}
            {{paper-icon "error" primary=true}}
            {{#paper-tooltip}}Bestand niet correct opgeladen{{/paper-tooltip}}
          {{/if}}
          {{#if queue.files.length}}
            {{paper-progress-circular diameter=25}}
          {{else}}
            <i class="material-icons md-18">cloud_upload</i>
          {{/if}}
        {{/file-upload}}
      {{/if}}
      {{#if model.certificateReceived}}
        {{certificate-download-button invoice=model}}
        {{#paper-button onClick=(action "deleteCertificate") iconButton=true}}
          {{paper-icon "remove_circle"}}
          {{#paper-tooltip}}Verwijder certificaat{{/paper-tooltip}}
        {{/paper-button}}
      {{/if}}
    </div>
  </section>
</div>

{{yield}}