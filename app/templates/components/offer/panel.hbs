{{#if (or this.remove.isRunning @model.isDeleted)}}
  <div>
    <PaperProgressLinear />
    <p>Aan het verwijderen...</p>
  </div>
{{else if this.rollbackTree.isRunning}}
  <div>
    <PaperProgressLinear />
    <p>Aan het herstellen...</p>
  </div>
{{else if (and (not @model.id) @model.isSaving)}}
  <div>
    <PaperProgressLinear />
    <p>Aan het aanmaken...</p>
  </div>
{{else}}
  <div class="space-y-4">
    {{#if this.order}}
      <AlertMessage::Warning
        @message="De offerte is reeds besteld. Er zijn geen wijzigingen meer mogelijk."
        class="shadow" />
    {{else if @model.isMasteredByAccess}}
      <AlertMessage::Warning
        @message="De offerte is aangemaakt in Access en kan hier niet gewijzigd worden."
        class="shadow" />
    {{else if this.hasMixedVatRates}}
      <AlertMessage::Info
        @message="De offerte bevat items met verschillende BTW tarieven. Hier kan geen bestelling voor opgesteld worden."
        class="shadow" />
    {{/if}}

    {{!-- Details panel --}}
    <div class="bg-white shadow rounded-lg overflow-hidden">
      {{#if @editMode}}
        <Offer::DetailEdit
          @model={{@model}}
          @saveTask={{this.save}}
          @onRemove={{perform this.remove}}
          @onCloseEdit={{this.closeEdit}}
          @isEnabledDelete={{this.isEnabledDelete}} />
      {{else}}
        <Offer::DetailView
          @model={{@model}}
          @isDisabledEdit={{this.isDisabledEdit}}
          @onOpenEdit={{@onOpenEdit}} />
      {{/if}}
    </div>

    {{!-- Document panel --}}
    <div class="bg-white shadow rounded-lg overflow-hidden">
      <Offer::DocumentView
        @model={{@model}}
        @generateOfferDocumentTask={{this.generateOfferDocument}}
        @onDowloadOfferDocument={{this.downloadOfferDocument}}
        @isDisabledEdit={{this.isDisabledEdit}} />
    </div>
  </div>
{{/if}}

<UnsavedChangesDialog
  @show={{this.showUnsavedChangesDialog}}
  @onCancel={{fn this.closeUnsavedChangesDialog}}
  @onConfirm={{fn this.confirmCloseEdit}} />
